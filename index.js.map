{"version":3,"file":"index.js","sources":["../src/constants/constants.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.query-form'),\n  loader: document.querySelector('.loader'),\n};\n\nexport const PX_API_KEY=\"28534332-8f968f9e2a1846e3bb62dda3d\"\n\nexport const STORAGE_KEY = \"query\";\n\nexport const simpleLightboxOptions = {\n  overlay        : true,\n  overlayOpacity : 1,\n  captions       : true,\n  captionPosition: 'bottom',\n  captionType    : 'attr',\n  captionsData   : 'alt',\n  captionDelay   : 250,\n};","import { PX_API_KEY } from '../constants/constants.js';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api';\naxios.defaults.baseURL = BASE_URL;\n\n\nexport async function getPhotos(query) {\n  const params = {\n    key        : PX_API_KEY,\n    q          : query,\n    image_type : 'photo',\n    orientation: 'horizontal',\n    safesearch : true,\n  };\n\n  try {\n    const response = await axios.get('/', { params });\n    return response.data?.hits || null;\n  } catch (error) {\n    console.error('Fetch pixabay error: ', error instanceof Error ? error.message : error);\n    return null;\n  }\n}","export function renderGallery(cards) {\n  return cards\n    .map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) =>\n        `\n            <li class=\"gallery-card\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" height=312 width=200>\n                    <ul class=\"statistics\">\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Likes</p>\n                            <p class=\"stat-value\">${likes}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Views</p>\n                            <p class=\"stat-value\">${views}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Comments</p>\n                            <p class=\"stat-value\">${comments}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Downloads</p>\n                            <p class=\"stat-value\">${downloads}</p>\n                        </li>\n                    </ul>\n                </a>\n            </li>\n      `\n    )\n    .join(\"\");\n}","import { refs, simpleLightboxOptions, STORAGE_KEY } from './constants/constants.js';\nimport { getPhotos } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\n\nlet query = fillFormFields(refs.form);\n\nrefs.form.addEventListener('input', handleFormInput);\nrefs.form.addEventListener('submit', handleSearch);\nconst simpleLightBox = new SimpleLightbox('.gallery li a', simpleLightboxOptions);\n\nfunction handleFormInput(e) {\n  query = e.target.value.trim();\n  localStorage.setItem(STORAGE_KEY, query);\n}\n\n\nasync function handleSearch(e) {\n  e.preventDefault();\n  if (!query) return;\n\n  refs.gallery.innerHTML = '';\n  refs.loader.style.display = 'block';\n\n  const photos = await getPhotos(query);\n\n  if (!photos) {\n    iziToast.error({ message: 'Sorry, there was an error while getting photos. Please try again!', position: 'topRight' });\n    return\n  }\n  else if (photos.length === 0) {\n    iziToast.warning({ message: 'Sorry, there are no images matching your search query. Please try again!', position: 'topRight' });\n  }\n  else {\n    refs.loader.style.display = 'none';\n    refs.gallery.innerHTML = renderGallery(photos);\n    simpleLightBox.refresh();\n  }\n\n  query = '';\n  localStorage.removeItem(STORAGE_KEY);\n  refs.form.reset();\n}\n\n\nfunction fillFormFields(form) {\n  const localStorageData = localStorage.getItem(STORAGE_KEY);\n  if (!localStorageData) return;\n\n  form.elements.query.value = localStorageData;\n  return localStorageData || '';\n}"],"names":["refs","PX_API_KEY","STORAGE_KEY","simpleLightboxOptions","BASE_URL","axios","getPhotos","query","params","_a","error","renderGallery","cards","webformatURL","tags","likes","views","comments","downloads","largeImageURL","fillFormFields","handleFormInput","handleSearch","simpleLightBox","SimpleLightbox","e","photos","iziToast","form","localStorageData"],"mappings":"owBAAO,MAAMA,EAAO,CAClB,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,aAAa,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEaC,EAAW,qCAEXC,EAAc,QAEdC,EAAwB,CACnC,QAAiB,GACjB,eAAiB,EACjB,SAAiB,GACjB,gBAAiB,SACjB,YAAiB,OACjB,aAAiB,MACjB,aAAiB,GACnB,ECfMC,EAAW,0BACjBC,EAAM,SAAS,QAAUD,EAGlB,eAAeE,EAAUC,EAAO,OACrC,MAAMC,EAAS,CACb,IAAaP,EACb,EAAaM,EACb,WAAa,QACb,YAAa,aACb,WAAa,EACjB,EAEE,GAAI,CAEF,QAAOE,GADU,MAAMJ,EAAM,IAAI,IAAK,CAAE,OAAAG,CAAM,CAAE,GAChC,OAAT,YAAAC,EAAe,OAAQ,IAC/B,OAAQC,EAAO,CACd,eAAQ,MAAM,wBAAyBA,aAAiB,MAAQA,EAAM,QAAUA,CAAK,EAC9E,IACR,CACH,CCvBO,SAASC,EAAcC,EAAO,CACnC,OAAOA,EACJ,IAAI,CAAC,CAAE,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAe,IAC1E;AAAA;AAAA,gDAEwCA,CAAa;AAAA,sDACPN,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,oDAI5BC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,OAMxD,EACA,KAAK,EAAE,CACZ,CCxBA,IAAIX,EAAQa,EAAepB,EAAK,IAAI,EAEpCA,EAAK,KAAK,iBAAiB,QAASqB,CAAe,EACnDrB,EAAK,KAAK,iBAAiB,SAAUsB,CAAY,EACjD,MAAMC,EAAiB,IAAIC,EAAe,gBAAiBrB,CAAqB,EAEhF,SAASkB,EAAgBI,EAAG,CAC1BlB,EAAQkB,EAAE,OAAO,MAAM,KAAI,EAC3B,aAAa,QAAQvB,EAAaK,CAAK,CACzC,CAGA,eAAee,EAAaG,EAAG,CAE7B,GADAA,EAAE,eAAc,EACZ,CAAClB,EAAO,OAEZP,EAAK,QAAQ,UAAY,GACzBA,EAAK,OAAO,MAAM,QAAU,QAE5B,MAAM0B,EAAS,MAAMpB,EAAUC,CAAK,EAEpC,GAAKmB,EAIIA,EAAO,SAAW,EACzBC,EAAS,QAAQ,CAAE,QAAS,2EAA4E,SAAU,UAAU,CAAE,GAG9H3B,EAAK,OAAO,MAAM,QAAU,OAC5BA,EAAK,QAAQ,UAAYW,EAAce,CAAM,EAC7CH,EAAe,QAAO,OAVX,CACXI,EAAS,MAAM,CAAE,QAAS,oEAAqE,SAAU,UAAU,CAAE,EACrH,MACD,CAUDpB,EAAQ,GACR,aAAa,WAAWL,CAAW,EACnCF,EAAK,KAAK,OACZ,CAGA,SAASoB,EAAeQ,EAAM,CAC5B,MAAMC,EAAmB,aAAa,QAAQ3B,CAAW,EACzD,GAAK2B,EAEL,OAAAD,EAAK,SAAS,MAAM,MAAQC,EACrBA,GAAoB,EAC7B"}