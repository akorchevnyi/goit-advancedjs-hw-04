{"version":3,"file":"index.js","sources":["../src/constants/constants.js","../src/js/pixabay-api.js","../src/js/components/loader.js","../src/js/render-functions.js","../src/js/components/gallery.js","../src/js/components/loadButton.js","../src/js/components/endWarning.js","../src/main.js"],"sourcesContent":["export const refs = {\n  gallery     : document.querySelector('.gallery'),\n  form        : document.querySelector('.query-form'),\n  loader      : document.querySelector('.loader'),\n  loadBtn     : document.querySelector('.load-btn'),\n  endWarningText: document.querySelector('.end-warning'),\n};\n\nexport const PX_API_KEY = '28534332-8f968f9e2a1846e3bb62dda3d';\n\nexport const STORAGE_KEY = 'query';\n\nexport const simpleLightboxOptions = {\n  overlay        : true,\n  overlayOpacity : 1,\n  captions       : true,\n  captionPosition: 'bottom',\n  captionType    : 'attr',\n  captionsData   : 'alt',\n  captionDelay   : 250,\n};","import { PX_API_KEY } from \"../constants/constants.js\";\nimport axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api\";\naxios.defaults.baseURL = BASE_URL;\n\n\nexport async function getPhotos(query, page) {\n    const params = {\n        key        : PX_API_KEY,\n        q          : query,\n        image_type : \"photo\",\n        orientation: \"horizontal\",\n        safesearch : true,\n        per_page   : 15,\n        page\n    };\n\n    try {\n        const response = await axios.get(\"/\", { params });\n        const { hits, totalHits } = response?.data || {};\n\n        return hits ? { photos: hits, isNext: (15 * page) < totalHits } : {};\n    } catch (error) {\n        console.error(\"Fetch pixabay error: \", error instanceof Error ? error.message : error);\n        return {};\n    }\n}","import { refs } from '../../constants/constants.js';\n\nconst loader = {\n  show() {\n    refs.loader.style.display = 'block';\n  },\n\n  hide() {\n    refs.loader.style.display = 'none';\n  },\n};\n\nexport default loader","export function renderGallery(photos) {\n\n  return photos\n    .map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) =>\n      `\n            <li class=\"gallery-card\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" height=\"312\" width=\"200\" loading=\"lazy\">\n                    <ul class=\"statistics\">\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Likes</p>\n                            <p class=\"stat-value\">${likes}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Views</p>\n                            <p class=\"stat-value\">${views}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Comments</p>\n                            <p class=\"stat-value\">${comments}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Downloads</p>\n                            <p class=\"stat-value\">${downloads}</p>\n                        </li>\n                    </ul>\n                </a>\n            </li>\n      `,\n    )\n    .join('');\n}","import { refs } from '../../constants/constants.js';\nimport { renderGallery } from '../render-functions.js';\n\n\nconst gallery = {\n\n  show(photos) {\n    refs.gallery.innerHTML = renderGallery(photos);\n  },\n\n  addNewPhotos(photos) {\n    const newPhotosHTML = renderGallery(photos);\n    refs.gallery.innerHTML = refs.gallery.innerHTML + newPhotosHTML;\n  },\n\n  clear() {\n    refs.gallery.innerHTML = '';\n  },\n};\n\nexport default gallery;","import { refs } from '../../constants/constants.js';\nimport { handleLoadMore } from '../../main.js';\n\nconst loadButton = {\n  show() {\n    refs.loadBtn.style.display = 'block';\n    refs.loadBtn.addEventListener('click', handleLoadMore);\n  },\n\n  hide() {\n    refs.loadBtn.removeEventListener('click', handleLoadMore);\n    refs.loadBtn.style.display = 'none';\n  },\n};\n\nexport default loadButton;","import { refs } from '../../constants/constants.js';\n\nconst endWarning = {\n  show() {\n    refs.endWarningText.style.display = 'block';\n  },\n\n  hide() {\n    refs.endWarningText.style.display = 'none';\n  },\n};\n\nexport default endWarning;","import { refs, simpleLightboxOptions, STORAGE_KEY } from \"./constants/constants.js\";\rimport { getPhotos } from \"./js/pixabay-api.js\";\rimport \"izitoast/dist/css/iziToast.min.css\";\rimport \"simplelightbox/dist/simple-lightbox.min.css\";\rimport iziToast from \"izitoast\";\rimport SimpleLightbox from \"simplelightbox\";\rimport loader from \"./js/components/loader.js\";\rimport gallery from \"./js/components/gallery.js\";\rimport loadButton from \"./js/components/loadButton.js\";\rimport endWarning from \"./js/components/endWarning.js\";\r\rlet query = fillFormFields(refs.form);\rlet page = 1;\r\rrefs.form.addEventListener(\"input\", handleFormInput);\rrefs.form.addEventListener(\"submit\", handleSearch);\r\rconst simpleLightBox = new SimpleLightbox(\".gallery li a\", simpleLightboxOptions);\r\r\rfunction handleFormInput(e) {\r    query = e.target.value.trim();\r    localStorage.setItem(STORAGE_KEY, query);\r}\r\r\rasync function handleSearch(e) {\r    e.preventDefault();\r    if (!query) return;\r\r    page = 1;\r    loadButton.hide();\r    endWarning.hide();\r    gallery.clear();\r    loader.show();\r\r    const { photos, isNext } = await fetchPictures();\r\r    if (photos?.length) {\r        gallery.show(photos);\r        isNext && loadButton.show();\r\r        simpleLightBox.refresh();\r        localStorage.removeItem(STORAGE_KEY);\r\r        refs.form.reset();\r        page += 1;\r    }\r\r    loader.hide();\r}\r\r\rexport async function handleLoadMore() {\r    loader.show();\r    loadButton.hide();\r    endWarning.hide();\r\r    const { photos, isNext } = await fetchPictures();\r    if (photos?.length === 0) {\r        endWarning.show();\r    }\r    else if (photos?.length) {\r        gallery.addNewPhotos(photos);\r        smoothScroll();\r        isNext ? loadButton.show() : endWarning.show();\r        simpleLightBox.refresh();\r        page += 1;\r    }\r\r    loader.hide();\r}\r\r\rasync function fetchPictures() {\r    const data = await getPhotos(query, page);\r\r    const { photos } = data;\r\r    if (!photos) {\r        iziToast.error({ message: \"Sorry, there was an error while getting photos. Please try again!\", position: \"topRight\" });\r        return;\r    }\r    else if (photos.length === 0) {\r        console.log(\"==== 0 ==> \", 0);\r        iziToast.warning({ message: \"Sorry, there are no images matching your search query. Please try again!\", position: \"topRight\" });\r    }\r\r    return data;\r}\r\r\rfunction fillFormFields(form) {\r    const localStorageData = localStorage.getItem(STORAGE_KEY);\r    if (!localStorageData) return;\r\r    form.elements.query.value = localStorageData;\r    return localStorageData || \"\";\r}\r\r\rfunction smoothScroll() {\r    const card = document.querySelector(\".gallery-card\");\r    const height = card.getBoundingClientRect().height + 32;\r\r    window.scrollBy({\r        top     : height * 2,\r        left    : 0,\r        behavior: \"smooth\"\r    });\r}"],"names":["refs","PX_API_KEY","STORAGE_KEY","simpleLightboxOptions","BASE_URL","axios","getPhotos","query","page","params","response","hits","totalHits","error","loader","renderGallery","photos","webformatURL","tags","likes","views","comments","downloads","largeImageURL","gallery","newPhotosHTML","loadButton","handleLoadMore","endWarning","fillFormFields"],"mappings":"owBAAO,MAAMA,EAAO,CAClB,QAAc,SAAS,cAAc,UAAU,EAC/C,KAAc,SAAS,cAAc,aAAa,EAClD,OAAc,SAAS,cAAc,SAAS,EAC9C,QAAc,SAAS,cAAc,WAAW,EAChD,eAAgB,SAAS,cAAc,cAAc,CACvD,EAEaC,EAAa,qCAEbC,EAAc,QAEdC,EAAwB,CACnC,QAAiB,GACjB,eAAiB,EACjB,SAAiB,GACjB,gBAAiB,SACjB,YAAiB,OACjB,aAAiB,MACjB,aAAiB,GACnB,ECjBMC,EAAW,0BACjBC,EAAM,SAAS,QAAUD,EAGlB,eAAeE,EAAUC,EAAOC,EAAM,CACzC,MAAMC,EAAS,CACX,IAAaR,EACb,EAAaM,EACb,WAAa,QACb,YAAa,aACb,WAAa,GACb,SAAa,GACb,KAAAC,CACR,EAEI,GAAI,CACA,MAAME,EAAW,MAAML,EAAM,IAAI,IAAK,CAAE,OAAAI,CAAM,CAAE,EAC1C,CAAE,KAAAE,EAAM,UAAAC,CAAS,GAAKF,GAAA,YAAAA,EAAU,OAAQ,CAAA,EAE9C,OAAOC,EAAO,CAAE,OAAQA,EAAM,OAAS,GAAKH,EAAQI,CAAW,EAAG,EACrE,OAAQC,EAAO,CACZ,eAAQ,MAAM,wBAAyBA,aAAiB,MAAQA,EAAM,QAAUA,CAAK,EAC9E,EACV,CACL,CCzBA,MAAMC,EAAS,CACb,MAAO,CACLd,EAAK,OAAO,MAAM,QAAU,OAC7B,EAED,MAAO,CACLA,EAAK,OAAO,MAAM,QAAU,MAC7B,CACH,ECVO,SAASe,EAAcC,EAAQ,CAEpC,OAAOA,EACJ,IAAI,CAAC,CAAE,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAe,IAC5E;AAAA;AAAA,gDAE0CA,CAAa;AAAA,sDACPN,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,oDAI5BC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,OAMxD,EACA,KAAK,EAAE,CACZ,CC9BA,MAAME,EAAU,CAEd,KAAKR,EAAQ,CACXhB,EAAK,QAAQ,UAAYe,EAAcC,CAAM,CAC9C,EAED,aAAaA,EAAQ,CACnB,MAAMS,EAAgBV,EAAcC,CAAM,EAC1ChB,EAAK,QAAQ,UAAYA,EAAK,QAAQ,UAAYyB,CACnD,EAED,OAAQ,CACNzB,EAAK,QAAQ,UAAY,EAC1B,CACH,ECfM0B,EAAa,CACjB,MAAO,CACL1B,EAAK,QAAQ,MAAM,QAAU,QAC7BA,EAAK,QAAQ,iBAAiB,QAAS2B,CAAc,CACtD,EAED,MAAO,CACL3B,EAAK,QAAQ,oBAAoB,QAAS2B,CAAc,EACxD3B,EAAK,QAAQ,MAAM,QAAU,MAC9B,CACH,ECXM4B,EAAa,CACjB,MAAO,CACL5B,EAAK,eAAe,MAAM,QAAU,OACrC,EAED,MAAO,CACLA,EAAK,eAAe,MAAM,QAAU,MACrC,CACH,ECV0gB,IAAIO,EAAQsB,EAAe7B,EAAK,IAAI"}